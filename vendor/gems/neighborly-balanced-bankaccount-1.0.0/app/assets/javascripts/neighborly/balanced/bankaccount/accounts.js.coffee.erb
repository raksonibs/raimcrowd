Neighborly.Neighborly                               ?= {}
Neighborly.Neighborly.Balanced                      ?= {}
Neighborly.Neighborly.Balanced.Bankaccount          ?= {}
Neighborly.Neighborly.Balanced.Bankaccount.Accounts ?= {}

Neighborly.Neighborly.Balanced.Bankaccount.Accounts.New =
  modules: -> [Neighborly.Neighborly.Balanced.Bankaccount.Form]
  init: Backbone.View.extend
    el: '.neighborly-balanced-bankaccount-form'

    initialize: ->
      _.bindAll(this, 'toggleSelected', 'toggleReplaceBank')
      this.$('input[name="payment[show_bank]"]').bind('change', this.toggleReplaceBank)
      this.$('input[type=radio]').bind('change', this.toggleSelected)
      this.toggleSelected()

    toggleSelected: ->
      this.$('.bank-box').removeClass('selected')
      this.$('input[type=radio]:checked.show-bank').parents('.bank-box').addClass('selected')

    toggleReplaceBank: (event)->
      $box = $(event.currentTarget).parents('.bank-box')
      $('.expandable').addClass('hide')
      $box.find('.expandable').removeClass('hide')
